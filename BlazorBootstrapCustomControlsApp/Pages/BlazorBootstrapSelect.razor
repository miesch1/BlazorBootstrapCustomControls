@page "/test-blazorbootstrap"

<PageTitle>Custom Blazor Bootstrap Select Controls Test</PageTitle>

<h3>Custom Blazor Bootstrap Select Components</h3>
<p class="text-muted">Showcasing BlazorBootstrapSelectSingle and BlazorBootstrapSelectMulti from the BlazorBootstrapCustomControls library.</p>
<p class="text-muted small">These controls provide input-like appearance, full data binding with @@bind-Value, and comprehensive keyboard navigation per the README specification.</p>

<h4 class="mt-4">Single Select (BlazorBootstrapSelectSingle)</h4>
<p class="text-muted small">Input-like single-select control with @@bind-Value support and keyboard navigation.</p>

<BlazorBootstrapSelectSingle TItem="SportOption"
                             Label="Single Sport (Custom)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sport --"
                             @bind-Value="@selectedSportCustom" />

<p class="mt-2">Selected: @selectedSportCustom</p>

<BlazorBootstrapSelectSingle TItem="SportOption"
                             Label="Single Sport (No Deselect)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sport --"
                             AllowDeselect="false"
                             ShowClearButton="true"
                             @bind-Value="@selectedSportNoDeselect" />

<p class="mt-2">Selected: @selectedSportNoDeselect</p>

<BlazorBootstrapSelectSingle TItem="SportOption"
                             Label="Single Sport (Disabled)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sport --"
                             Disabled="true"
                             Value="@selectedSportDisabled" />

<p class="mt-2">Selected: @selectedSportDisabled</p>

<BlazorBootstrapSelectSingle TItem="SportOption"
                             Label="Single Sport (Custom Width)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sport --"
                             Width="400px"
                             @bind-Value="@selectedSportCustomWidth" />

<p class="mt-2">Selected: @selectedSportCustomWidth</p>

<hr />

<h4 class="mt-4">Multi Select (BlazorBootstrapSelectMulti)</h4>
<p class="text-muted small">Input-like multi-select control with @@bind-Value support, check-marks for selected items, and dropdown stays open for multiple selections.</p>

<BlazorBootstrapSelectMulti TItem="SportOption"
                             Label="Multiple Sports (Custom)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sports --"
                             @bind-Value="@selectedSportsCustom" />

<p class="mt-2">Selected: @string.Join(", ", selectedSportsCustom ?? Array.Empty<string>())</p>

<BlazorBootstrapSelectMulti TItem="SportOption"
                             Label="Multiple Sports (Disabled)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sports --"
                             Disabled="true"
                             Value="@selectedSportsDisabled" />

<p class="mt-2">Selected: @string.Join(", ", selectedSportsDisabled ?? Array.Empty<string>())</p>

<BlazorBootstrapSelectMulti TItem="SportOption"
                             Label="Multiple Sports (No Clear Button)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sports --"
                             ShowClearButton="false"
                             @bind-Value="@selectedSportsNoClear" />

<p class="mt-2">Selected: @string.Join(", ", selectedSportsNoClear ?? Array.Empty<string>())</p>

<p class="text-muted small">Ellipsis ("...") when content exceeds width.</p>

<div class="form-check mb-2">
  <input class="form-check-input" type="checkbox" id="autoExpandToggle" @bind="@autoExpandEnabled" />
  <label class="form-check-label" for="autoExpandToggle">
    Enable AutoExpandVertically
  </label>
</div>

<BlazorBootstrapSelectMulti TItem="SportOption"
                             Label="Multiple Sports (Custom Width + Auto-Expand)"
                             Data="@Sports"
                             TextField="s => s.Name"
                             ValueField="s => s.Id"
                             PlaceholderText="-- Select Sports --"
                             Width="400px"
                             AutoExpandVertically="@autoExpandEnabled"
                             @bind-Value="@selectedSportsAutoExpand" />

<p class="mt-2">Selected: @string.Join(", ", selectedSportsAutoExpand ?? Array.Empty<string>())</p>
<p class="text-muted small">AutoExpandVertically="@autoExpandEnabled": input grows vertically when text wraps.</p>

<hr />

<h4 class="mt-4">Key Features</h4>
<div class="alert alert-success">
  <h5>Custom Blazor Bootstrap Select Controls Advantages:</h5>
  <ul class="mb-0">
    <li><strong>Input-like Appearance:</strong> Matches native Bootstrap form-control styling, not button-style</li>
    <li><strong>Data Binding:</strong> Full @@bind-Value support with type-safe EventCallback</li>
    <li><strong>Focus Ring:</strong> Remains on input while interacting with dropdown list</li>
    <li><strong>Keyboard Navigation:</strong> Down/Right/Enter to open, Arrow keys to navigate, Enter to select, Escape/Tab to close</li>
    <li><strong>Placeholder Support:</strong> Built-in placeholder text when no value selected</li>
    <li><strong>Clear Button:</strong> Optional clear button (Ã—) for easy deselection</li>
    <li><strong>Multi-select:</strong> Dropdown stays open, selected items show check-marks, comma-separated display</li>
    <li><strong>Overflow:</strong> Ellipsis ("...") by default when text exceeds width; optional <code>AutoExpandVertically</code> to wrap and grow</li>
    <li><strong>Validation:</strong> Supports EditForm and ValidationMessage components</li>
    <li><strong>Type Safety:</strong> Generic TItem with strongly-typed TextField and ValueField</li>
    <li><strong>Accessibility:</strong> Full ARIA support (role, aria-expanded, aria-selected, etc.)</li>
  </ul>
</div>

@code {
  public class SportOption
  {
    public string Id { get; set; } = string.Empty;
    public string Name { get; set; } = string.Empty;
  }

  private List<SportOption> Sports = new()
  {
    new() { Id = "1", Name = "Cross-Country, Track & Field" },
    new() { Id = "2", Name = "Cross-Country" },
    new() { Id = "3", Name = "Swimming" },
    new() { Id = "4", Name = "Track & Field" },
    new() { Id = "5", Name = "Basketball" },
    new() { Id = "6", Name = "Soccer" },
    new() { Id = "7", Name = "Tennis" }
  };

  // Single select values
  private string? selectedSportCustom;
  private string? selectedSportNoDeselect;
  private string? selectedSportDisabled = "3"; // Pre-selected for disabled example
  private string? selectedSportCustomWidth;

  // Multi select values
  private string[]? selectedSportsCustom = Array.Empty<string>();
  private string[]? selectedSportsDisabled = new[] { "3", "5" }; // Pre-selected for disabled example
  private string[]? selectedSportsNoClear = Array.Empty<string>();
  private string[]? selectedSportsCustomWidth = Array.Empty<string>();
  private string[]? selectedSportsAutoExpand = Array.Empty<string>();
  private bool autoExpandEnabled = true; // Default to true to show auto-expand behavior initially
}
